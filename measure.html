//= template/header_inner.html

<section class="breadcrumbs">
    <div class="container">
        <ul class="breadcrumbs-list">
            <li>
                <a href="#">Главная</a>
            </li>
            <li>
                Замер помещения
            </li>
        </ul>
    </div>
</section>
<section class="regis-zag single-zag">
    <div class="container">
        <h1>
            Замер помещения
        </h1>
    </div>
</section>

<section>
    <div class="container regis__steps-position d-flex measure__page">
        <div class="regis__steps wrapper__content-delivery active-delivery">
            <div class="position-wrapper-steps">
                <section class="regis__step-1">
                    <div class="regis__step_caption-block">
                        <span class="regis__step-number">1</span>
                        <p class="regis__step_caption">Заказчик</p>
                    </div>
                    <div class="wrapper__content regis__individual active">
                        <div class="form-floating regis__input-block">
                            <input type="text" class="form-control regis__input" id="floatingInput" placeholder="Имя и Фамилия">
                            <label class="regis__label" for="floatingInput">Фамилия и имя</label>
                            <button type="reset" class="btn clear__input">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="14.0021" height="14.0025" rx="7.00105" fill="#F5F4F0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.00127 7.70838L9.29499 10.0021L10.0021 9.29499L7.70838 7.00127L10.0021 4.70756L9.29499 4.00045L7.00127 6.29417L4.70711 4L4 4.70711L6.29417 7.00127L4 9.29544L4.70711 10.0025L7.00127 7.70838Z" fill="#C4C4C4"/>
                                </svg>
                            </button>
                        </div>
                        <div class="form-floating regis__input-block regis__input-block-tel">
                            <input type="tel" class="form-control regis__input input__tel" id="floatingInput3" placeholder="Телефон">
                            <label class="regis__label" for="floatingInput3">Телефон</label>
                            <button type="reset" class="btn clear__input">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="14.0021" height="14.0025" rx="7.00105" fill="#F5F4F0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.00127 7.70838L9.29499 10.0021L10.0021 9.29499L7.70838 7.00127L10.0021 4.70756L9.29499 4.00045L7.00127 6.29417L4.70711 4L4 4.70711L6.29417 7.00127L4 9.29544L4.70711 10.0025L7.00127 7.70838Z" fill="#C4C4C4"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </section>
                <section class="regis__step-1">
                    <div class="regis__step_caption-block">
                        <span class="regis__step-number">2</span>
                        <p class="regis__step_caption">Адрес</p>
                    </div>
                    <div class="measure__address-position-block">
                        <div class="form-floating regis__input-block input-addres">
                            <input type="text" name="address" class="form-control regis__input" id="address" placeholder="Название организации">
                            <label class="regis__label" for="address">Введите адрес доставки</label>
                            <div class="open-search-address">
                                <p class="subtitle">Продолжите ввод или выберите вариант из списка</p>
                                <div>
                                    <p class="address">ул. <span>Пу</span>шкина</p>
                                </div>
                                <div>
                                    <p class="address">ул. <span>Пу</span>шкинская</p>
                                </div>
                            </div>
                            <button type="reset" class="btn clear__input">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="14.0021" height="14.0025" rx="7.00105" fill="#F5F4F0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.00127 7.70838L9.29499 10.0021L10.0021 9.29499L7.70838 7.00127L10.0021 4.70756L9.29499 4.00045L7.00127 6.29417L4.70711 4L4 4.70711L6.29417 7.00127L4 9.29544L4.70711 10.0025L7.00127 7.70838Z" fill="#C4C4C4"/>
                                </svg>
                            </button>
                        </div>
                        <div class="form-floating regis__input-block small-input">
                            <input type="text" name="address" class="form-control regis__input" placeholder="Название организации">
                            <label class="regis__label" for="address">Этаж</label>
                            <button type="reset" class="btn clear__input">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="14.0021" height="14.0025" rx="7.00105" fill="#F5F4F0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.00127 7.70838L9.29499 10.0021L10.0021 9.29499L7.70838 7.00127L10.0021 4.70756L9.29499 4.00045L7.00127 6.29417L4.70711 4L4 4.70711L6.29417 7.00127L4 9.29544L4.70711 10.0025L7.00127 7.70838Z" fill="#C4C4C4"/>
                                </svg>
                            </button>
                        </div>
                        <div class="form-floating regis__input-block middle-input">
                            <input type="text" name="address" class="form-control regis__input" placeholder="Название организации">
                            <label class="regis__label" for="address">Квартира</label>
                            <button type="reset" class="btn clear__input">
                                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect width="14.0021" height="14.0025" rx="7.00105" fill="#F5F4F0"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.00127 7.70838L9.29499 10.0021L10.0021 9.29499L7.70838 7.00127L10.0021 4.70756L9.29499 4.00045L7.00127 6.29417L4.70711 4L4 4.70711L6.29417 7.00127L4 9.29544L4.70711 10.0025L7.00127 7.70838Z" fill="#C4C4C4"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div>
                        <div id="map" class="map__delivery"></div>
                        <button type="button" class="btn regis__shop-item_btn map__select-modile-btn" data-toggle="modal" data-target="#modalMapMobile">Указать точку на карте</button>
                    </div>
                    <div class="form-check block__comments block__commentsDriver" onclick="viewCommentsDr()">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault6">
                        <label class="form-check-label" for="flexCheckDefault6">
                            Добавить комментарий мастеру
                        </label>
                    </div>
                    <div class="regis__textarea-block" id="commentsDriver3">
                        <div class="form-group">
                            <textarea placeholder="комментарий мастеру" class="form-control rounded-0" id="exampleFormControlTextarea2" rows="10"></textarea>
                        </div>
                    </div>
                </section>
                <section class="regis__step-1">
                    <div class="regis__step_caption-block">
                        <span class="regis__step-number">3</span>
                        <p class="regis__step_caption">Дата</p>
                    </div>
                    <div class="measure__position-date modal-3d-3">
                        <div class="measure__position-date-block">
                            <button class="btn measure__date-btn">13 ноября 2021</button>
                            <div class="datepicker"></div>
                        </div>
                        <div class="measure__info-block">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="9" fill="#922F27"/>
                                <path d="M12.8026 17H11.1926V10.7H12.8026V17ZM11.0246 8.432C11.0246 8.152 11.1179 7.928 11.3046 7.76C11.5006 7.58267 11.7433 7.494 12.0326 7.494C12.2846 7.494 12.4993 7.58267 12.6766 7.76C12.8633 7.93733 12.9566 8.16133 12.9566 8.432C12.9566 8.73067 12.8633 8.97333 12.6766 9.16C12.4993 9.34667 12.2846 9.44 12.0326 9.44C11.7433 9.44 11.5006 9.34667 11.3046 9.16C11.1179 8.97333 11.0246 8.73067 11.0246 8.432Z" fill="white"/>
                            </svg>
                            <p>
                                Итоговую дату мастер согласует с вами по телефону
                            </p>
                        </div>
                    </div>

                </section>
                <section class="regis__step-1">
                    <div class="regis__step_caption-block">
                        <span class="regis__step-number">4</span>
                        <p class="regis__step_caption">Способ оплаты</p>
                    </div>
                    <div class="regis__block-pay">
                        <div class="radio">
                            <input class="custom-radio pay-radio" type="radio" id="card" name="color">
                            <label for="card">Картой на сайте</label>
                            <div class="position__img">
                                <img class="regis__block__img" src="img/МИР.svg" alt="Мир">
                                <img class="regis__block__img" src="img/Visa.svg" alt="Виза">
                                <img class="regis__block__img" src="img/Mastercard.svg" alt="Мастеркард">
                            </div>
                        </div>
                        <div class="radio">
                            <input class="custom-radio pay-radio" type="radio" id="wallet" name="color">
                            <label for="wallet">Наличными мастеру</label>
                            <div class="position__img">
                                <img class="regis__block__img" src="img/wallet.svg" alt="кошелёк">
                            </div>
                        </div>
                        <div class="radio">
                            <input class="custom-radio pay-radio" type="radio" id="cardDriver" name="color">
                            <label for="cardDriver">На карту мастеру</label>
                            <div class="position__img">
                                <img class="regis__block__img" src="img/purchase.svg" alt="Карта">
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        <div class="receipt_sidebar-sticky">
            <div class="sidebar__inner">
                <div class="receipt__block">
                    <div class="receipt__price-block">
                        <h3 class="order__receipt-caption">Ваша заявка</h3>
                        <div class="receipt__count-products-block first__products-block">
                            <p class="receipt__count">Замер помещения</p>
                            <p class="receipt__first-price">1110 ₽</p>
                        </div>
                        <div class="receipt__total-price-block">
                            <p class="receipt__text">Итого</p>
                            <p class="receipt__price">2 187 ₽</p>
                        </div>
                    </div>
                    <button class="btn receipt__registration-btn btn_red">Перейти к оформлению</button>
                    <p class="receipt__registration-policy">
                        Нажимая на кнопку «Оформить заказ» вы соглашаетесь на обработку и хранение персональных данных в соответствии <a href="#">с политикой конфиденциальности</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="margin-item">
</section>

<div class="modal modal-fullscreen-md-down fade map__modal" id="modalMapMobile" tabindex="-1" role="dialog" aria-labelledby="modalMap" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <button type="button" class="close map__modal-close" data-dismiss="modal" aria-label="Close">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 1.05L10.95 0L6 4.95L1.05 0L0 1.05L4.95 6L0 10.95L1.05 12L6 7.05L10.95 12L12 10.95L7.05 6L12 1.05Z" fill="#242424"/>
                </svg>
            </button>
            <div class="modal-header">
                <h5 class="cart__modal-title">Выбрать адрес на карте</h5>
            </div>
            <div class="modal-body">
                <div id="map1" class="map">
                </div>
                <div class="position__address-modal-block">
                    <button type="button" class="close map__modal-close" id="modalSelect">
                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 1.05L10.95 0L6 4.95L1.05 0L0 1.05L4.95 6L0 10.95L1.05 12L6 7.05L10.95 12L12 10.95L7.05 6L12 1.05Z" fill="#242424"/>
                        </svg>
                    </button>
                    <p class="input-addres-modal" id="addressMobile"></p>
                    <button class="btn open__shop-modal-btn btn_red" type="button" data-dismiss="modal" aria-label="Close">Выбрать</button>
                </div>
            </div>
        </div>
    </div>
</div>

//= template/footer.html

<script>
    function viewUnloading(){
        $("#unloading").toggleClass('active-comments');
        $("#unloading").parent().parent().toggleClass("active-unloading")
        if ($(".more").hasClass("active-comments")){
            $(".more").removeClass('active-comments')
        }else {
            $(".more").addClass('active-comments')
        }
    };

    function viewRise(){
        $("#rise").parent().parent().toggleClass("active-unloading");
        $("#rise").toggleClass("active-floor");
        $('.regis__warning-block').toggleClass('regis__warning-block-active')
    };

    function viewComments(){
        $("#comments").toggleClass('active-comments');
    };

    function viewCommentsDr(){
        $("#commentsDriver3").toggleClass('active-comments');
    };


    function viewCommentsDrpost(){
        $("#commentsDriver4").toggleClass('active-comments');
    };

    function viewMeters(){
        $("#meters").toggleClass('active-meters');
    };

    ymaps.ready(init);

    function init(){
        var  myInput = document.getElementById("address")
        var  myInput2 = document.getElementById("addressMobile"),
            myPlacemark,
            myMap2,
            myMap = new ymaps.Map('map', {
                center: [55.753994, 37.622093],
                zoom: 9,
                controls:[]
            },{
                suppressMapOpenBlock: true
            });
        myMap2 = new ymaps.Map('map1', {
            center: [55.753994, 37.622093],
            zoom: 9,
            controls:[]
        },{
            suppressMapOpenBlock: true
        });

        $('#modalSelect').click(function(){
            $('.position__address-modal-block').removeClass('active_mobile-modal-address');
        });
        myMap.events.add('click', function (e) {
            var coords = e.get('coords');

            // Если метка уже создана – просто передвигаем ее.
            if (myPlacemark) {
                myPlacemark.geometry.setCoordinates(coords);
            }
            // Если нет – создаем.
            else {
                myPlacemark = createPlacemark(coords);
                myMap.geoObjects.add(myPlacemark);
                $('.position__address-modal-block').addClass('active_mobile-modal-address');
                // Слушаем событие окончания перетаскивания на метке.
                myPlacemark.events.add('dragend', function () {
                    getAddress(myPlacemark.geometry.getCoordinates());
                });
            }
            getAddress(coords);
        });

        myMap2.events.add('click', function (e) {
            var coords = e.get('coords');

            // Если метка уже создана – просто передвигаем ее.
            if (myPlacemark) {
                myPlacemark.geometry.setCoordinates(coords);
            }
            // Если нет – создаем.
            else {
                myPlacemark = createPlacemark(coords);
                myMap2.geoObjects.add(myPlacemark);
                $('.position__address-modal-block').addClass('active_mobile-modal-address');
                // Слушаем событие окончания перетаскивания на метке.
                myPlacemark.events.add('dragend', function () {
                    getAddress(myPlacemark.geometry.getCoordinates());
                });
            }
            getAddress(coords);
        });


        // Создание метки.
        function createPlacemark(coords) {
            return new ymaps.Placemark(coords, {
                iconCaption: 'поиск...'
            }, {
                iconLayout: 'default#imageWithContent',
                // Своё изображение иконки метки.
                iconImageHref: '../build/img/map-click-marcer.svg ',
                // Размеры метки.
                iconImageSize: [35, 43],
                // Смещение левого верхнего угла иконки относительно
                // её "ножки" (точки привязки).
                iconImageOffset: [-20, -45],
                // Смещение слоя с содержимым относительно слоя с картинкой.
                iconContentOffset: [0, 0],
            });
        }

        // Определяем адрес по координатам (обратное геокодирование).
        function getAddress(coords) {
            myPlacemark.properties.set('iconCaption', 'поиск...');
            ymaps.geocode(coords).then(function (res) {
                var firstGeoObject = res.geoObjects.get(0),
                    address = firstGeoObject.getAddressLine();

                myPlacemark.properties
                    .set({
                        // Формируем строку с данными об объекте.
                        iconCaption: [
                            // Название населенного пункта или вышестоящее административно-территориальное образование.
                            firstGeoObject.getLocalities().length ? firstGeoObject.getLocalities() : firstGeoObject.getAdministrativeAreas(),
                            // Получаем путь до топонима, если метод вернул null, запрашиваем наименование здания.
                            firstGeoObject.getThoroughfare() || firstGeoObject.getPremise()
                        ].filter(Boolean).join(', '),
                        // В качестве контента балуна задаем строку с адресом объекта.
                        balloonContent: address
                    });
                myInput.value = address;
                myInput2.innerHTML = address;
                myMap.setCenter(coords, 9, {
                    checkZoomRange: true
                })
                myMap2.setCenter(coords, 9, {
                    checkZoomRange: true
                })
            });
        }

    }





</script>

<script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.js" type="text/javascript"></script>